import React from "react";
import PropTypes from "prop-types";
import classNames from "classnames";
import { ProgressBarLabel } from "../ProgressBarLabel";

import targetStyles from "./ProgressBarTarget.module.css";

import { indicatorStore } from "@/stores/IndicatorStore.js";
import { observer } from "mobx-react-lite";

export const ProgressBarTarget = observer((props) => {
    const { propertyName, position, isVisible, size } = props;

    const {
        progressBarKeys: { showTargets, targetsLabelPosition },
        progressBarDatum: datumObject,
    } = indicatorStore;

    if (!showTargets || !isVisible) {
        return null;
    }

    const targetSizeName = `${propertyName}Width`;
    const targetLineWidth = size?.[targetSizeName];
    const propertyNameFormatted = `${propertyName}Formatted`;
    const currentTargetFormatted = datumObject?.[propertyNameFormatted];

    return (
        <div className={targetStyles.Target} style={{ width: targetLineWidth }}>
            <ProgressBarLabel
                label={currentTargetFormatted}
                showValue={showTargets}
                position={position}
                labelPosition={targetsLabelPosition}
                index={2}
            />
        </div>
    );
});
export default ProgressBarTarget;
